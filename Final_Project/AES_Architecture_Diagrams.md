# AES FPGA System Architecture Diagrams

## 1. Top-Level System Architecture

```
                                  ┌───────────────────────────────────────────────────┐
                                  │                   AES_TOP                         │
                                  │                                                   │
 ┌─────────────┐                  │  ┌─────────────┐        ┌───────────────────┐     │
 │ Input Data  │───────────────►  │  │             │        │                   │     │
 └─────────────┘                  │  │             │        │                   │     │
                                  │  │    Key      │        │                   │     │
 ┌─────────────┐                  │  │ Expansion   │───────►│   AES Round       │     │
 │    Key      │───────────────►  │  │  Module     │        │    Logic          │     │
 └─────────────┘                  │  │             │        │ (Encryption/      │     │
                                  │  │             │        │  Decryption)      │     │
 ┌─────────────┐                  │  └─────────────┘        │                   │     │
 │ Mode Select │───────────────►  │                         │                   │     │
 └─────────────┘                  │                         │                   │     │
                                  │                         └───────────────────┘     │
 ┌─────────────┐                  │                                 │                 │
 │ Start/Reset │───────────────►  │                                 │                 │
 └─────────────┘                  │                                 │                 │
                                  │                                 ▼                 │
                                  │                         ┌───────────────────┐     │
                                  │                         │   State Machine   │     │
                                  │                         │   Control Logic   │     │
                                  │                         └───────────────────┘     │
                                  │                                 │                 │
                                  └─────────────────────────────────┼─────────────────┘
                                                                    │
                                                                    ▼
                                                          ┌───────────────────┐
                                                          │    Output Data    │
                                                          └───────────────────┘
```

## 2. AES Round Structure (Encryption)

```
                                 ┌───────────────────────────────────────────────────┐
                                 │                  AES_ROUND                        │
                                 │                                                   │
┌─────────────┐                  │  ┌─────────────┐                                  │
│ Input State │───────────────►  │  │  SubBytes   │                                  │
└─────────────┘                  │  │  (S-box)    │                                  │
                                 │  └─────────────┘                                  │
                                 │         │                                         │
                                 │         ▼                                         │
                                 │  ┌─────────────┐                                  │
                                 │  │  ShiftRows  │                                  │
                                 │  └─────────────┘                                  │
                                 │         │                                         │
                                 │         ▼                                         │
                                 │  ┌─────────────┐     ┌─────────────┐              │
                                 │  │ MixColumns  │     │ Round Key   │              │
                                 │  └─────────────┘     └─────────────┘              │
                                 │         │                   │                     │
                                 │         │                   │                     │
                                 │         │                   │                     │
                                 │         └─────────┬─────────┘                     │
                                 │                   │                               │
                                 │                   ▼                               │
                                 │  ┌─────────────────────────┐                      │
                                 │  │      AddRoundKey        │                      │
                                 │  │      (XOR with key)     │                      │
                                 │  └─────────────────────────┘                      │
                                 │                   │                               │
                                 └───────────────────┼───────────────────────────────┘
                                                     │
                                                     ▼
                                           ┌───────────────────┐
                                           │   Output State    │
                                           └───────────────────┘
```

## 3. Pipelined Architecture

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐          ┌─────────────┐
│ Input Block │───►│ Initial Add │───►│  Round 1    │    ...   │  Round 10   │───►
└─────────────┘    │  Round Key  │    │             │          │ (Final)     │
                   └─────────────┘    └─────────────┘          └─────────────┘
                         ▲                  ▲                        ▲
                         │                  │                        │
                   ┌─────────────┐    ┌─────────────┐          ┌─────────────┐
                   │  Round Key  │    │  Round Key  │    ...   │  Round Key  │
                   │     K₀      │    │     K₁      │          │     K₁₀     │
                   └─────────────┘    └─────────────┘          └─────────────┘
                         ▲                  ▲                        ▲
                         │                  │                        │
                         └──────────────────┴────────────────────────┘
                                            │
                                     ┌─────────────┐
                                     │     Key     │
                                     │  Expansion  │
                                     └─────────────┘
                                            ▲
                                            │
                                     ┌─────────────┐
                                     │  Input Key  │
                                     └─────────────┘

Pipeline Registers Between Rounds:
┌─────────┐     ┌─────────┐     ┌─────────┐           ┌─────────┐
│ Block 1 │────►│ Block 1 │────►│ Block 1 │─── ... ──►│ Block 1 │────► Output
└─────────┘     └─────────┘     └─────────┘           └─────────┘
     ▲               ▲               ▲                     ▲
     │               │               │                     │
┌─────────┐     ┌─────────┐     ┌─────────┐           ┌─────────┐
│ Block 2 │────►│ Block 2 │────►│ Block 2 │─── ... ──►│ Block 2 │────► Output
└─────────┘     └─────────┘     └─────────┘           └─────────┘
     ▲               ▲               ▲                     ▲
     │               │               │                     │
┌─────────┐     ┌─────────┐     ┌─────────┐           ┌─────────┐
│ Block 3 │────►│ Block 3 │────►│ Block 3 │─── ... ──►│ Block 3 │────► Output
└─────────┘     └─────────┘     └─────────┘           └─────────┘
     ▲               ▲               ▲                     ▲
     │               │               │                     │
     │               │               │                     │
  Input          Round 1          Round 2              Round 10
```

## 4. SystemC Simulation Architecture

```
┌───────────────────────────────────────────────────────────────────────────────────┐
│                                 SystemC Simulation                                │
│                                                                                   │
│  ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────────────┐    │
│  │                 │      │                 │      │                         │    │
│  │  AesSimulation  │      │     AesTop      │      │     AesKeyExpansion     │    │
│  │    Module       │◄────►│     Module      │◄────►│        Module           │    │
│  │                 │      │                 │      │                         │    │
│  └─────────────────┘      └────────┬────────┘      └─────────────────────────┘    │
│                                    │                                              │
│                                    │                                              │
│                                    ▼                                              │
│                           ┌─────────────────┐                                     │
│                           │                 │                                     │
│                           │    AesRound     │                                     │
│                           │     Module      │                                     │
│                           │                 │                                     │
│                           └─────────────────┘                                     │
│                                    │                                              │
│                                    │                                              │
│                                    ▼                                              │
│  ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────────────┐    │
│  │                 │      │                 │      │                         │    │
│  │    AesSBox      │      │   AesShiftRows  │      │     AesMixColumns       │    │
│  │                 │      │                 │      │                         │    │
│  └─────────────────┘      └─────────────────┘      └─────────────────────────┘    │
│                                                                                   │
└───────────────────────────────────────────────────────────────────────────────────┘

                                      │
                                      ▼
                            ┌───────────────────┐
                            │   Test Vectors    │
                            │   Verification    │
                            └───────────────────┘
```

## 5. AES Data Flow and Transformations

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                     │
│                             AES Data Transformations                                │
│                                                                                     │
│  ┌───────────────┐                                                                  │
│  │ 128-bit Block │                                                                  │
│  │ (4x4 Matrix)  │                                                                  │
│  └───────┬───────┘                                                                  │
│          │                                                                          │
│          ▼                                                                          │
│  ┌───────────────┐   ┌─────────────────────────────────────────────────────────┐    │
│  │  SubBytes     │   │ Each byte is replaced using an S-box substitution table │    │
│  └───────┬───────┘   └─────────────────────────────────────────────────────────┘    │
│          │                                                                          │
│          ▼                                                                          │
│  ┌───────────────┐   ┌─────────────────────────────────────────────────────────┐    │
│  │  ShiftRows    │   │ Row 0: No shift                                         │    │
│  │               │   │ Row 1: Shift left by 1 byte                             │    │
│  │               │   │ Row 2: Shift left by 2 bytes                            │    │
│  │               │   │ Row 3: Shift left by 3 bytes                            │    │
│  └───────┬───────┘   └─────────────────────────────────────────────────────────┘    │
│          │                                                                          │
│          ▼                                                                          │
│  ┌───────────────┐   ┌─────────────────────────────────────────────────────────┐    │
│  │  MixColumns   │   │ Matrix multiplication in GF(2^8) with fixed polynomial  │    │
│  │               │   │ c(x) = 3x^3 + x^2 + x + 2                               │    │
│  └───────┬───────┘   └─────────────────────────────────────────────────────────┘    │
│          │                                                                          │
│          ▼                                                                          │
│  ┌───────────────┐   ┌─────────────────────────────────────────────────────────┐    │
│  │  AddRoundKey  │   │ XOR with round key derived from key expansion           │    │
│  └───────┬───────┘   └─────────────────────────────────────────────────────────┘    │
│          │                                                                          │
│          ▼                                                                          │
│  ┌───────────────┐                                                                  │
│  │ Transformed   │                                                                  │
│  │ 128-bit Block │                                                                  │
│  └───────────────┘                                                                  │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

## 6. Key Expansion Process

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                     │
│                               Key Expansion Process                                 │
│                                                                                     │
│  ┌───────────────┐                                                                  │
│  │ 128-bit Key   │                                                                  │
│  │ (16 bytes)    │                                                                  │
│  └───────┬───────┘                                                                  │
│          │                                                                          │
│          ▼                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────┐  │
│  │                                                                               │  │
│  │  Round 0 Key = Initial Key                                                    │  │
│  │                                                                               │  │
│  │  For rounds i = 1 to 10:                                                      │  │
│  │                                                                               │  │
│  │    1. Take last 4 bytes (word) of previous round key                          │  │
│  │    2. Perform RotWord: Rotate the word by one byte to the left                │  │
│  │    3. Perform SubWord: Apply S-box to each byte of the rotated word           │  │
│  │    4. XOR with round constant (Rcon[i]) in the first byte                     │  │
│  │    5. XOR with first 4 bytes of previous round key to get first 4 bytes       │  │
│  │    6. XOR each subsequent 4-byte word with the previous 4-byte word           │  │
│  │                                                                               │  │
│  └───────────────────────────────────────────────────────────────────────────────┘  │
│                                      │                                              │
│                                      ▼                                              │
│  ┌───────────────────────────────────────────────────────────────────────────────┐  │
│  │                                                                               │  │
│  │  Round Keys (11 total, including initial key):                                │  │
│  │                                                                               │  │
│  │  K₀: Initial key                                                              │  │
│  │  K₁: First round key                                                          │  │
│  │  K₂: Second round key                                                         │  │
│  │  ...                                                                          │  │
│  │  K₁₀: Final round key                                                         │  │
│  │                                                                               │  │
│  └───────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘